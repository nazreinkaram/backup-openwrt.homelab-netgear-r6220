INSTALLED_PACKAGES_LIST=$(opkg list-installed)

say() {
    printf "\n$1\n"
}

_say() {
    printf "$1\n"
}

say_() {
    printf "\n$1"
}

wait() {
    sleep 5
}

install_required_packages() {
    //
    install_package bash
    install_package nano-full
    install_package rsync
    install_package git-http
    install_package ethtool
    install_package iptables-nft
    install_package stubby
    install_package tailscale
    install_package luci-app-nlbwmon
    install_package luci-app-wol
    install_package ddns-scripts
    install_package ddns-scripts-cloudflare
    install_package luci-app-acme
}

install_package() {
    #
    if [ "$(echo "$INSTALLED_PACKAGES_LIST" | grep "$1")" ]; then
        #
        _say "Package '$1' is already installed, so SKIPPED"
    else
        opkg install "$1" >/dev/null 2>&1

        if [ $? -eq 0 ]; then
            _say "Package '$1' INSTALLED successfully"
        else
            _say "UNABLE to install package '$1'."
            return 1
        fi
    fi

    sleep 1
}

GITEA_BACKUP_REPOSITORY_NAME="backup-openwrt.homelab-netgear-r6220"
GITEA_BACKUP_REPOSITORY_URL="http://gitea.manjeet/manjeet/$GITEA_REPOSITORY_NAME.git"
GITEA_BACKUP_REPOSITORY_PATH="/overlay/upper/$GITEA_BACKUP_REPOSITORY_NAME"
